<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Cash register</title>
</head>
<body>
	



	<script>



/*const Register_status = {closed : 'CLOSED',insufficientFunds :'INSUFFICIENT_FUNDS',open :'OPEN'
}
function checkCashRegister(price, cash, cid) {

let cashRegister = {status: "", change:cid};
const changeNeeded = parseFloat(cash-price).toFixed(2);
const changeAvailable = getTotalCashRegisterChange(cid);
cashRegister.status = getToCashRegisterStatus(changeNeeded,changeAvailable)
//console.log(cashRegister.change)

if(cashRegister.status === Register_status.insufficientFunds){
	cashRegister.change=[];

return cashRegister;
}

cashRegister.change = getCustomersChange(changeNeeded,cid);

if (changeNeeded > getTotalCashRegisterChange(cashRegister.change)){
	cashRegister.status = Register_status.insufficientFunds;
}
if(cashRegister.status === Register_status.closed){
	cashRegister.change = [...cid]
}
return cashRegister;
}





function getCustomersChange(changeNeeded,changeInDrawer){
	const change =[];
	const denominations ={
		"PENNY": 0.01,
		"NICKEL":0.05,
		"DIME":0.10,
		"QUARTER":0.25,
		"ONE":1.00,
		"FIVE":5.00,
		"TEN":10.00,
		"TWENTY":20.00,
		"ONE HUNDRED":100.00
	}
	
for (let i = changeInDrawer.length-1;i>=0;i--){

	const coinName = changeInDrawer[i][0];
	const coinTotal = changeInDrawer[i][1];
	const coinValue = denominations[coinName];
	let coinAmount = (coinTotal/coinValue).toFixed(2);
	let coinToReturn =0;
	while(changeNeeded >= coinValue && coinAmount >0){
		changeNeeded -= coinValue;
		changeNeeded =changeNeeded.toFixed(2);
		coinAmount --;
		coinToReturn++;

	}
	if (coinToReturn > 0){
		change.push([coinName,coinToReturn*coinValue]);
	}

}


}




function getToCashRegisterStatus(changeNeeded,changeAvailable){
		if(Number(changeNeeded)>Number(changeAvailable)){
			return Register_status.insufficientFunds;
		} else if(Number(changeNeeded)<Number(changeAvailable)){
			return Register_status.open;
		}
		return Register_status.closed;
}


function getTotalCashRegisterChange(cid){
let total = 0;
//console.log(changeInDrawer)
for(let change of cid){
	total += change[1];

}
return total.toFixed(2) 

}





console.log(checkCashRegister(19.5, 20, [["PENNY", 1.01], ["NICKEL", 2.05], ["DIME", 3.1], ["QUARTER", 4.25], ["ONE", 90], ["FIVE", 55], ["TEN", 20], ["TWENTY", 60], ["ONE HUNDRED", 100]]));

*/


const Register_status = {closed : 'CLOSED',insufficientFunds :'INSUFFICIENT_FUNDS',open :'OPEN'
};
function checkCashRegister(price,cash,cid){
	let cashRegister = {status : "", change:cid};
	const changeNeeded = parseFloat(cash-price).toFixed(2);
	const changeAvailable = getTotalCashRegisterChange(cid);
	cashRegister.status = getToCashRegisterStatus(changeNeeded,changeAvailable)




if(cashRegister.status === Register_status.insufficientFunds){
	cashRegister.change=[];

return cashRegister;
}
cashRegister.change = getCustomersChange(changeNeeded,cid);

if (changeNeeded > getTotalCashRegisterChange(cashRegister.change)){
	cashRegister.status = Register_status.insufficientFunds;
	cashRegister.change = [];
}
if(cashRegister.status === Register_status.closed){
	cashRegister.change = [...cid]
}
return cashRegister;


}
function getCustomersChange(changeNeeded,changeInDrawer){
	const change =[];
	const denominations ={
		"PENNY": 0.01,
		"NICKEL":0.05,
		"DIME":0.10,
		"QUARTER":0.25,
		"ONE":1.00,
		"FIVE":5.00,
		"TEN":10.00,
		"TWENTY":20.00,
		"ONE HUNDRED":100.00
	}
	
for (let i = changeInDrawer.length-1;i>=0;i--){

	const coinName = changeInDrawer[i][0];
	const coinTotal = changeInDrawer[i][1];
	const coinValue = denominations[coinName];
	let coinAmount = (coinTotal/coinValue).toFixed(2);
	let coinToReturn =0;
	while(changeNeeded >= coinValue && coinAmount >0){
		changeNeeded -= coinValue;
		changeNeeded =changeNeeded.toFixed(2);
		coinAmount --;
		coinToReturn++;

	}
	if (coinToReturn > 0){
		change.push([coinName,coinToReturn*coinValue]);
	}

}
return change;

}
function getToCashRegisterStatus(changeNeeded,changeAvailable){
		if(Number(changeNeeded)>Number(changeAvailable)){
			return Register_status.insufficientFunds;
		} else if(Number(changeNeeded)<Number(changeAvailable)){
			return Register_status.open;
		}
		return Register_status.closed;
}
function getTotalCashRegisterChange(cid){
let total = 0;
//console.log(changeInDrawer)
for(let change of cid){
	total += change[1];

}
return total.toFixed(2) 

}


console.log(checkCashRegister(19.5, 20, [["PENNY", 1.01], ["NICKEL", 2.05], ["DIME", 3.1], ["QUARTER", 4.25], ["ONE", 90], ["FIVE", 55], ["TEN", 20], ["TWENTY", 60], ["ONE HUNDRED", 100]]));











	</script>
</body>
</html>